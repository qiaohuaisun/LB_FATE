# ETBBS + LB_FATE

[![.NET](https://img.shields.io/badge/.NET-8.0-512BD4)](https://dotnet.microsoft.com/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE.txt)

**è¯­è¨€**: [English](README.md) | ä¸­æ–‡

ä¸€ä¸ªç”±Claude code ååŠ©å®Œæˆï¼Œå¯å¤ç”¨çš„ .NET 8 ç½‘æ ¼å›åˆåˆ¶ç­–ç•¥æ¸¸æˆæ¡†æ¶ï¼Œæä¾›ä¸å¯å˜çŠ¶æ€å¼•æ“ã€æ–‡æœ¬æŠ€èƒ½ DSLï¼Œä»¥åŠå¯è¿è¡Œçš„ç¤ºä¾‹æ§åˆ¶å°æ¸¸æˆã€‚

---

## ğŸ“‹ ç›®å½•

- [ç‰¹æ€§](#-ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [æ¶æ„](#-æ¶æ„)
- [ç›®å½•ç»“æ„](#-ç›®å½•ç»“æ„)
- [å¼€å§‹ä½¿ç”¨](#-å¼€å§‹ä½¿ç”¨)
  - [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
  - [æ„å»º](#æ„å»º)
  - [è¿è¡Œæ¸¸æˆ](#è¿è¡Œæ¸¸æˆ)
- [å®¢æˆ·ç«¯](#-å®¢æˆ·ç«¯)
  - [æ§åˆ¶å°å®¢æˆ·ç«¯](#æ§åˆ¶å°å®¢æˆ·ç«¯)
- [å¼€å‘å·¥å…·](#-å¼€å‘å·¥å…·)
  - [LBR éªŒè¯å™¨](#lbr-éªŒè¯å™¨)
- [æ¸¸æˆæ¨¡å¼](#-æ¸¸æˆæ¨¡å¼)
- [LBR DSL](#-lbr-dslè§’è‰²ä¸æŠ€èƒ½)
- [é…ç½®](#-é…ç½®)
- [æ–‡æ¡£](#-æ–‡æ¡£)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## âœ¨ ç‰¹æ€§

### æ ¸å¿ƒæ¡†æ¶ (ETBBS)
- **ä¸å¯å˜ä¸–ç•ŒçŠ¶æ€**ï¼šå¯é¢„æµ‹ã€å¯æµ‹è¯•çš„æ¸¸æˆé€»è¾‘ä¸åŸå­è¡ŒåŠ¨
- **æ–‡æœ¬æŠ€èƒ½ DSL**ï¼šä½¿ç”¨ `.lbr` æ–‡ä»¶å®šä¹‰è§’è‰²ä¸æŠ€èƒ½
- **äº‹ä»¶æ€»çº¿ç³»ç»Ÿ**ï¼šå“åº”å¼æ¸¸æˆäº‹ä»¶ä¸çŠ¶æ€å˜æ›´
- **å›åˆåˆ¶æ‰§è¡Œ**ï¼šåŸºäºé˜¶æ®µçš„å›åˆç³»ç»Ÿä¸éªŒè¯
- **çµæ´»ç›®æ ‡é€‰æ‹©**ï¼šæ”¯æŒå•ä½“ã€èŒƒå›´ã€ç›´çº¿æ”»å‡»å’Œé€‰æ‹©å™¨

### ç¤ºä¾‹æ¸¸æˆ (LB_FATE)
- **2D ç½‘æ ¼æˆ˜æ–—**ï¼šå¯è‡ªå®šä¹‰ç½‘æ ¼çš„æˆ˜æœ¯å›åˆåˆ¶æˆ˜æ–—
- **TCP å¤šäººæ¸¸æˆ**ï¼šä¸»æœº/å®¢æˆ·ç«¯ç½‘ç»œæ¶æ„
- **Boss æ¨¡å¼**ï¼š7 äººåˆä½œå¯¹æŠ—ä½¿ç”¨è„šæœ¬å†³ç­–æ ‘çš„ AI Boss
- **æ··æˆ˜æ¨¡å¼**ï¼šä¼ ç»Ÿå¤§é€ƒæ€ç©æ³•
- **æ§åˆ¶å°ç•Œé¢**ï¼šä¸ºç»ˆç«¯æ¸¸æˆæä¾›çš„æ–‡æœ¬ç•Œé¢

### å¼€å‘è€…ä½“éªŒ
- **è¯­æ³•éªŒè¯å™¨**ï¼šåœ¨è¿è¡Œå‰éªŒè¯ `.lbr` æ–‡ä»¶çš„ CLI å·¥å…·
- **VS Code æ‰©å±•**ï¼šè¯­æ³•é«˜äº®ã€è¡¥å…¨ã€ä»£ç ç‰‡æ®µå’Œè¯Šæ–­
- **å…¨é¢æ—¥å¿—**ï¼šå¤šçº§åˆ«æ—¥å¿—ä¸æ€§èƒ½è¿½è¸ª
- **çƒ­é‡è½½è§’è‰²**ï¼šä»ç›®å½•åŠ è½½è‡ªå®šä¹‰è§’è‰²

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# æœ¬åœ°å•äººï¼ˆæ¨¡æ‹Ÿ 7 ä¸ª AI ç©å®¶ï¼‰
dotnet run --project LB_FATE

# ä¸»æœºå¤šäººæœåŠ¡å™¨
dotnet run --project LB_FATE -- --host --players 4 --port 35500

# ä½œä¸ºå®¢æˆ·ç«¯è¿æ¥
dotnet run --project LB_FATE -- --client 127.0.0.1:35500
```

---

## ğŸ— æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LB_FATE (æ¸¸æˆ)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  æ§åˆ¶å°UI  â”‚  â”‚  TCP ç½‘ç»œ  â”‚                     â”‚
â”‚  â”‚            â”‚  â”‚ ä¸»æœº/å®¢æˆ·ç«¯â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ETBBS æ ¸å¿ƒåº“                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  ä¸–ç•Œ   â”‚  â”‚  è¡ŒåŠ¨    â”‚  â”‚  æŠ€èƒ½    â”‚           â”‚
â”‚  â”‚  çŠ¶æ€   â”‚â—„â”€â”¤ ï¼ˆåŸå­ï¼‰ â”‚â—„â”€â”¤   DSL    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  å›åˆ   â”‚  â”‚  äº‹ä»¶    â”‚  â”‚LBR è§£æå™¨â”‚           â”‚
â”‚  â”‚  ç³»ç»Ÿ   â”‚  â”‚  æ€»çº¿    â”‚  â”‚          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **ä¸å¯å˜çŠ¶æ€**ï¼šæ¯ä¸ªè¡ŒåŠ¨äº§ç”Ÿæ–°çš„ä¸–ç•ŒçŠ¶æ€
- **åŸå­è¡ŒåŠ¨**ï¼šå¯ç»„åˆã€å·²éªŒè¯çš„è¡ŒåŠ¨ï¼ˆä¼¤å®³ã€æ²»ç–—ã€ç§»åŠ¨ç­‰ï¼‰
- **æŠ€èƒ½è„šæœ¬**ï¼šæ–‡æœ¬ DSL ç¼–è¯‘ä¸ºè¡ŒåŠ¨åºåˆ—
- **äº‹ä»¶é©±åŠ¨**ï¼šçŠ¶æ€å˜åŒ–å‘å‡º UI/æ—¥å¿—äº‹ä»¶

---

## ğŸ“ ç›®å½•ç»“æ„

```
ETBBS/
â”œâ”€â”€ ETBBS/                      # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ Core/                   # ä¸–ç•ŒçŠ¶æ€ã€é”®ã€ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ Actions/                # åŸå­è¡ŒåŠ¨ï¼ˆä¼¤å®³ã€æ²»ç–—ã€ç§»åŠ¨ï¼‰
â”‚   â”œâ”€â”€ Skills/                 # æŠ€èƒ½æ‰§è¡Œä¸éªŒè¯
â”‚   â”œâ”€â”€ DSL/                    # LBR è§£æå™¨ä¸ç¼–è¯‘å™¨
â”‚   â””â”€â”€ Systems/                # å›åˆç³»ç»Ÿã€äº‹ä»¶ã€å›æ”¾
â”‚
â”œâ”€â”€ LB_FATE/                    # ç¤ºä¾‹æ§åˆ¶å°æ¸¸æˆ
â”‚   â”œâ”€â”€ Game/                   # æ¸¸æˆå¾ªç¯ã€åˆå§‹åŒ–ã€å›åˆé€»è¾‘
â”‚   â”œâ”€â”€ Program.Main.cs         # å…¥å£ç‚¹
â”‚   â””â”€â”€ Net.cs                  # TCP ç½‘ç»œ
â”‚
â”œâ”€â”€ ETBBS.LbrValidator/         # CLI éªŒè¯å·¥å…·
â”‚   â”œâ”€â”€ Program.cs              # éªŒè¯å™¨é€»è¾‘
â”‚   â””â”€â”€ README.md               # éªŒè¯å™¨æ–‡æ¡£
â”‚
â”œâ”€â”€ ETBBS.Tests/                # å•å…ƒæµ‹è¯•
â”œâ”€â”€ LB_FATE.Tests/              # é›†æˆæµ‹è¯•
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ lbr.zh-CN.md            # LBR DSL æŒ‡å—ï¼ˆä¸­æ–‡ï¼‰
â”‚   â””â”€â”€ lbr.en.md               # LBR DSL æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
â”‚
â”œâ”€â”€ publish/                    # å‘å¸ƒç‰ˆ
â”‚   â”œâ”€â”€ roles/                  # ç¤ºä¾‹è§’è‰²æ–‡ä»¶ (.lbr)
â”‚   â”œâ”€â”€ runServer.cmd           # æœåŠ¡å™¨å¯åŠ¨å™¨
â”‚   â”œâ”€â”€ runClient.cmd           # å®¢æˆ·ç«¯å¯åŠ¨å™¨
â”‚   â””â”€â”€ README_LAUNCHER.md      # å¯åŠ¨å™¨æŒ‡å—
â”‚
â””â”€â”€ vscode-extension/           # VS Code æ‰©å±•
    â””â”€â”€ etbbs-lbr-tools-*.vsix  # å¯å®‰è£…æ‰©å±•
```

---

## ğŸ¯ å¼€å§‹ä½¿ç”¨

### ç³»ç»Ÿè¦æ±‚

- [.NET 8.0 SDK](https://dotnet.microsoft.com/download/dotnet/8.0) æˆ–æ›´é«˜ç‰ˆæœ¬
- ï¼ˆå¯é€‰ï¼‰[VS Code](https://code.visualstudio.com/) ç”¨äºç¼–è¾‘ `.lbr` æ–‡ä»¶

### æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/qiaohuaisun/LB_FATE.git
cd ETBBS

# è¿˜åŸå¹¶æ„å»º
dotnet restore
dotnet build ETBBS.sln -c Release

# è¿è¡Œæµ‹è¯•
dotnet test
```

### è¿è¡Œæ¸¸æˆ

#### æœ¬åœ°æ¨¡å¼ï¼ˆå•äººï¼‰
```bash
dotnet run --project LB_FATE
```
æ¨¡æ‹Ÿ 7 ä¸ª AI æ§åˆ¶çš„ç©å®¶è¿›è¡Œæ··æˆ˜ã€‚

#### å¤šäººæ¨¡å¼

**ä¸»æœºæœåŠ¡å™¨**ï¼š
```bash
dotnet run --project LB_FATE -- --host --players 4 --port 35500 --mode ffa
```

**è¿æ¥å®¢æˆ·ç«¯**ï¼š
```bash
dotnet run --project LB_FATE -- --client 127.0.0.1:35500
```

#### Boss æ¨¡å¼
```bash
dotnet run --project LB_FATE -- --host --mode boss --players 7
```
7 åç©å®¶åˆä½œå¯¹æŠ—å…·æœ‰è„šæœ¬è¡Œä¸ºçš„ AI Bossã€‚

---

## ğŸ–¥ æ§åˆ¶å°å®¢æˆ·ç«¯

**æ–‡æœ¬ç•Œé¢é€‚ç”¨äºï¼š**
- ç»ˆç«¯çˆ±å¥½è€…
- ä½èµ„æºç¯å¢ƒ
- è„šæœ¬å’Œè‡ªåŠ¨åŒ–

**å¯åŠ¨è„šæœ¬**ï¼ˆWindowsï¼‰ï¼š

| è„šæœ¬ | ç”¨é€” | æ—¥å¿— |
|------|------|------|
| `publish/runServer.cmd` | æ ‡å‡†æœåŠ¡å™¨ | äº¤äº’å¼é€‰æ‹© |
| `publish/runServer-logs.cmd` | è°ƒè¯•æœåŠ¡å™¨ | è¯¦ç»† + æ€§èƒ½è¿½è¸ª |
| `publish/runClient.cmd` | æ ‡å‡†å®¢æˆ·ç«¯ | äº¤äº’å¼é€‰æ‹© |
| `publish/runClient-logs.cmd` | è°ƒè¯•å®¢æˆ·ç«¯ | è¯¦ç»† + è‡ªåŠ¨é‡è¿ |

**å‘½ä»¤**ï¼ˆé˜¶æ®µ 2-4ï¼‰ï¼š
- `move x y` - ç§»åŠ¨åˆ° (x, y)ã€‚æ¶ˆè€—ï¼š0.5 MP
- `attack P#` - æ”»å‡»ç©å®¶ã€‚æ¶ˆè€—ï¼š0.5 MP
- `cast <æŠ€èƒ½> [ç›®æ ‡]` - ä½¿ç”¨æŠ€èƒ½
- `pass` - ç»“æŸå›åˆ
- `info` - æ˜¾ç¤ºå•ä½è¯¦æƒ…
- `help` - åˆ—å‡ºå¯ç”¨å‘½ä»¤

---

## ğŸ›  å¼€å‘å·¥å…·

### LBR éªŒè¯å™¨

åœ¨è¿è¡Œå‰éªŒè¯ `.lbr` æ–‡ä»¶ä»¥å°½æ—©æ•è·è¯­æ³•é”™è¯¯ã€‚

**ç”¨æ³•**ï¼š
```bash
# éªŒè¯ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶
dotnet run --project ETBBS.LbrValidator -- publish/roles -v

# é€’å½’æ‰«æå¹¶æ˜¾ç¤ºè¯¦æƒ…
dotnet run --project ETBBS.LbrValidator -- publish/roles -r -d

# å®‰é™æ¨¡å¼ï¼ˆä»…æ‘˜è¦ï¼‰
dotnet run --project ETBBS.LbrValidator -- publish/roles -q
```

**åŠŸèƒ½**ï¼š
- âœ… æ‰¹é‡éªŒè¯å¤šä¸ªæ–‡ä»¶
- âœ… é€’å½’ç›®å½•æ‰«æ
- âœ… å½©è‰²ç»ˆç«¯è¾“å‡ºï¼ˆâœ“/âœ—ï¼‰
- âœ… è¯¦ç»†é”™è¯¯æ¶ˆæ¯ä¸è¡Œå·
- âœ… CI/CD å‹å¥½ï¼ˆé€€å‡ºç ï¼š0 = æˆåŠŸï¼Œ1 = é”™è¯¯ï¼‰

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ETBBS LBR Validator - Role File Syntax Checker
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Found 9 .lbr file(s) to validate

Validating: artoria.lbr ... âœ“ OK
Validating: beast_florence.lbr ... âœ“ OK
...

âœ“ ALL FILES PASSED VALIDATION
```

ğŸ“– **å®Œæ•´æŒ‡å—**ï¼š[ETBBS.LbrValidator/README.md](ETBBS.LbrValidator/README.md)

---

## ğŸ® æ¸¸æˆæ¨¡å¼

### æ··æˆ˜æ¨¡å¼ (FFA)
- **é»˜è®¤æ¨¡å¼**ï¼š7 åç©å®¶äº‰å¤ºç”Ÿå­˜
- **èƒœåˆ©æ¡ä»¶**ï¼šæœ€åå­˜æ´»çš„ç©å®¶
- **ç½‘æ ¼**ï¼šé»˜è®¤ 10x10ï¼ˆå¯ç”¨ `--size WxH` è‡ªå®šä¹‰ï¼‰

### Boss æ¨¡å¼
- **åˆä½œ**ï¼š7 åç©å®¶å¯¹æŠ— 1 ä¸ª AI æ§åˆ¶çš„ Boss
- **Boss é€‰æ‹©**ï¼šå¸¦æœ‰ `beast`/`grand` æ ‡ç­¾çš„è§’è‰²ï¼ˆå¦‚ `beast_florence`ï¼‰
- **AI è¡Œä¸º**ï¼šåœ¨ `roles/<boss_id>.ai.json` ä¸­å®šä¹‰
- **èƒœåˆ©æ¡ä»¶**ï¼šåœ¨å›åˆé™åˆ¶å†…å‡»è´¥ Boss

**Boss AI è„šæœ¬ç¤ºä¾‹**ï¼š
```json
{
  "rules": [
    {
      "if": {
        "hp_pct_lte": 0.5,
        "skill_ready": "ç‹‚æš´æ¨¡å¼",
        "phase_in": [3, 4]
      },
      "target": { "type": "nearest_enemy" },
      "action": "cast",
      "skill": "ç‹‚æš´æ¨¡å¼"
    },
    {
      "if": { "distance_lte": 2, "skill_ready": "ç¾¤ä½“æ¨ªæ‰«" },
      "target": { "type": "cluster", "radius": 2 },
      "telegraph": true,
      "telegraph_delay": 1,
      "telegraph_message": "Boss æ­£åœ¨è“„åŠ›ç¾¤ä½“æ¨ªæ‰«ï¼"
    }
  ],
  "fallback": "basic_attack"
}
```

**é¢„è­¦ç³»ç»Ÿ**ï¼šBoss æå‰ä¸€ä¸ªé˜¶æ®µå®£å¸ƒå¼ºåŠ›æ”»å‡»ï¼Œç»™ç©å®¶æ—¶é—´åº”å¯¹ã€‚

---

## ğŸ“ LBR DSLï¼ˆè§’è‰²ä¸æŠ€èƒ½ï¼‰

LBRï¼ˆè§’è‰²å®šä¹‰æ–‡ä»¶ï¼‰ä½¿ç”¨åŸºäºæ–‡æœ¬çš„ DSL å®šä¹‰è§’è‰²å’ŒæŠ€èƒ½ã€‚

### æ–‡ä»¶ç»“æ„

```lbr
role "è§’è‰²åç§°" id "unique_id" {
  description "åœ¨ info å‘½ä»¤ä¸­æ˜¾ç¤º";

  vars {
    "hp" = 100; "max_hp" = 100;
    "mp" = 5.0; "max_mp" = 5.0;
    "atk" = 8; "def" = 5;
    "matk" = 6; "mdef" = 4;
    "range" = 2; "speed" = 3;
  }

  tags { "saber", "knight" }

  skills {
    skill "å‰‘å‡»" {
      range 2; targeting enemies; cooldown 1; cost mp 1;
      deal physical 10 damage to target from caster;
    }

    skill "æ²»ç–—æ³¢" {
      range 3; targeting allies; cooldown 2; cost mp 2;
      heal 15 to target;
    }
  }
}
```

### æŠ€èƒ½ DSL åŠŸèƒ½

**å…ƒä¿¡æ¯**ï¼š
- `cost mp N` - MP æ¶ˆè€—
- `range N` - æœ€å¤§å°„ç¨‹
- `cooldown N` - ä½¿ç”¨é—´éš”å›åˆæ•°
- `targeting any|enemies|allies|self|tile` - æœ‰æ•ˆç›®æ ‡
- `sealed_until day D phase P` - è§£é”æ—¶æœº
- `ends_turn` - ä½¿ç”¨åç«‹å³ç»“æŸå›åˆ

**æ§åˆ¶æµ**ï¼š
- `if <æ¡ä»¶> then <è¯­å¥> [else <è¯­å¥>]`
- `repeat N times <è¯­å¥>`
- `parallel { è¯­å¥; è¯­å¥; }`
- `for each <é€‰æ‹©å™¨> [in parallel] do { è¯­å¥ }`
- `chance P% then <è¯­å¥> [else <è¯­å¥>]`

**è¡ŒåŠ¨**ï¼š
- `deal [physical|magic] N damage to <å•ä½> [from <å•ä½>] [ignore defense X%]`
- `heal N to <å•ä½>`
- `move <å•ä½> to (x, y)`
- `dash towards <å•ä½> up to N`
- `line [physical|magic] P to <å•ä½> length L [radius R]`
- `add tag "æ ‡ç­¾" to <å•ä½>` / `remove tag "æ ‡ç­¾" from <å•ä½>`
- `set unit(<å•ä½>) var "é”®" = å€¼`

**é€‰æ‹©å™¨**ï¼š
- `enemies of caster in range 4 of caster` - 4 æ ¼å†…æ‰€æœ‰æ•Œäºº
- `enemies of caster in range 5 of caster with tag "stunned"` - æ™•çœ©æ•Œäºº
- `enemies of caster in range 100 of caster order by var "hp" asc limit 1` - HP æœ€ä½çš„æ•Œäºº
- `nearest 3 enemies of caster` - æœ€è¿‘çš„ 3 ä¸ªæ•Œäºº

**âš ï¸ å¸¸è§è¯­æ³•é”™è¯¯**ï¼š

| âŒ é”™è¯¯ | âœ… æ­£ç¡® |
|--------|--------|
| `for each enemies in range 2 of caster do {` | `for each enemies of caster in range 2 of caster do {` |
| `for each enemies of caster order by var "hp" desc in range 10 of caster do {` | `for each enemies of caster in range 10 of caster order by var "hp" desc do {` |

**å­å¥é¡ºåº**ï¼š`of <å•ä½>` â†’ `in range` â†’ `order by` â†’ `limit` â†’ `do`

ğŸ“– **å®Œæ•´ DSL æŒ‡å—**ï¼š[docs/lbr.zh-CN.md](docs/lbr.zh-CN.md) | [docs/lbr.en.md](docs/lbr.en.md)

---

## âš™ï¸ é…ç½®

### è§’è‰²ç›®å½•
ä»ä»¥ä¸‹ä½ç½®åŠ è½½è‡ªå®šä¹‰è§’è‰²ï¼š
1. å‘½ä»¤è¡Œï¼š`--roles <è·¯å¾„>`
2. ç¯å¢ƒå˜é‡ï¼š`LB_FATE_ROLES_DIR=<è·¯å¾„>`
3. é»˜è®¤ï¼š`<åº”ç”¨>/roles/`

### æ—¥å¿—

**ç¯å¢ƒå˜é‡**ï¼š
```bash
# Windows
set LB_FATE_LOG_LEVEL=Debug

# Linux/macOS
export LB_FATE_LOG_LEVEL=Debug
```

**å‘½ä»¤è¡Œæ ‡å¿—**ï¼š
- `--verbose` / `-v` - è¯¦ç»†æ—¥å¿—
- `--debug` / `-d` - è°ƒè¯•æ—¥å¿—
- `--perf` - å¯ç”¨æ€§èƒ½è¿½è¸ª

**çº§åˆ«**ï¼š`Verbose` > `Debug` > `Information`ï¼ˆé»˜è®¤ï¼‰> `Warning` > `Error` > `Fatal`

### æ¸¸æˆè®¾ç½®

| æ ‡å¿— | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--host` | ä¸»æœºæœåŠ¡å™¨æ¨¡å¼ | `--host --players 4 --port 35500` |
| `--client <åœ°å€>` | è¿æ¥åˆ°æœåŠ¡å™¨ | `--client 127.0.0.1:35500` |
| `--mode <ffa\|boss>` | æ¸¸æˆæ¨¡å¼ | `--mode boss` |
| `--size WxH` | ç½‘æ ¼å¤§å° | `--size 15x15` |
| `--roles <è·¯å¾„>` | è§’è‰²ç›®å½• | `--roles custom_roles` |

---

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [LBR DSL æŒ‡å—ï¼ˆä¸­æ–‡ï¼‰](docs/lbr.zh-CN.md) | å®Œæ•´ LBR è¯­æ³•å‚è€ƒ |
| [LBR DSL æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰](docs/lbr.en.md) | è‹±æ–‡ LBR è¯­æ³•æ‘˜è¦ |
| [LBR éªŒè¯å™¨æŒ‡å—](ETBBS.LbrValidator/README.md) | éªŒè¯å™¨å·¥å…·æ–‡æ¡£ |

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE.txt](LICENSE.txt)ã€‚

---

## ğŸ™ è‡´è°¢

- **.NET å›¢é˜Ÿ** - å“è¶Šçš„è¿è¡Œæ—¶å’Œ SDK
- **Claude code** - å¼ºå¤§çš„ Agentic Coding å·¥å…·

---

**æ¸¸æˆæ„‰å¿«ï¼ ğŸ®**