<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LB_FATE.MauiClient.DiscoverPage"
             Title="Discover">
    <Grid RowDefinitions="Auto,*" BackgroundColor="{StaticResource ColorBackground}">
        <!-- Action Buttons Card -->
        <Border Style="{StaticResource CardBorder}" Margin="20,20,20,10">
            <HorizontalStackLayout Spacing="12" HorizontalOptions="Center">
                <Button x:Name="RefreshBtn" Text="Refresh" Clicked="OnRefreshClicked" Style="{StaticResource AccentButton}" />
                <Button x:Name="UseBtn" Text="Use Selected" Clicked="OnUseClicked" Style="{StaticResource PrimaryButton}" />
            </HorizontalStackLayout>
        </Border>

        <!-- Enhanced Host List -->
        <Border Grid.Row="1" Style="{StaticResource CardBorder}" Margin="20,10,20,20">
            <Grid RowDefinitions="Auto,*" RowSpacing="12">
                <Label Text="Available Servers" FontAttributes="Bold" FontSize="18" />
                <RefreshView x:Name="RefreshView" Grid.Row="1" Refreshing="OnRefreshClicked">
                    <CollectionView x:Name="HostsList" SelectionMode="Single">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource ListItemBorder}">
                                    <Grid Padding="16" ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" ColumnSpacing="12">
                                        <Label Text="{Binding Host}" FontAttributes="Bold" FontSize="16" />
                                        <Label Grid.Column="1" Text="{Binding Port}" TextColor="{StaticResource ColorPrimary}" FontAttributes="Bold" FontSize="16" />
                                        <Label Grid.Row="1" Grid.ColumnSpan="2" Text="Click to select this server" TextColor="{StaticResource ColorMuted}" FontSize="13" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </RefreshView>
            </Grid>
        </Border>
    </Grid>
</ContentPage>
