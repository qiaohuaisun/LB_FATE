# LB_FATE Mobile 用户指南

## 📱 快速开始

### 系统要求
- **Android**: 5.0+ (API 21+)
- **iOS**: 15.0+
- **Windows**: 10.0.17763+

### 首次使用

#### 1️⃣ 启动服务器
在电脑上启动 LB_FATE 游戏服务器：
```bash
cd LB_FATE
dotnet run
```

默认监听端口：`35500`

#### 2️⃣ 连接服务器
打开移动应用，输入服务器信息：

**本机测试**：
- 地址：`127.0.0.1`
- 端口：`35500`
- 点击"本机(127.0.0.1)"快速填充

**局域网连接**：
- 地址：服务器的局域网IP（如 `192.168.1.100`）
- 端口：`35500`

**常见问题**：
- ❌ 连接失败 → 检查服务器是否已启动
- ❌ 找不到服务器 → 确认IP地址是否正确
- ❌ 连接超时 → 检查防火墙设置

#### 3️⃣ 开始游戏
连接成功后自动进入游戏界面。

---

## 🎮 游戏界面

### 界面布局

```
┌─────────────────────────────┐
│     游戏网格视图 (3行)        │  ← 战场地图
│                             │
├─────────────────────────────┤
│     消息日志 (2行)           │  ← 游戏消息
├─────────────────────────────┤
│  [技能表][pass][取消][技能]  │  ← 快捷按钮
│  [缩放][退出]                │
├─────────────────────────────┤
│  [命令输入框] [帮助] [发送]  │  ← 命令输入
└─────────────────────────────┘
```

### 颜色含义
- 🟢 **绿色** = 你的单位
- 🔵 **蓝色** = 友军
- 🔴 **红色** = 敌人
- 🟦 **蓝色半透明** = 可移动范围
- 🟥 **红色半透明** = 攻击范围
- 🟨 **金色半透明** = 技能施放范围

---

## 👆 操作方式

### 方式一：手势操作（推荐）

#### 移动
1. 点击自己的单位（绿色）
2. 显示蓝色移动范围
3. 点击目标位置
4. ✅ 自动执行移动

#### 攻击
**快速攻击**：
1. 点击自己的单位
2. 点击敌人（红色）
3. ✅ 自动发起攻击

**或直接点击敌人** → 填充命令到输入框

#### 使用技能

**单位/坐标目标**：
1. 点击"技能"按钮
2. 输入技能索引（0, 1, 2...）
3. 选择"点击地图选择"
4. 点击敌人或空格
5. ✅ 自动释放技能

**方向目标**：
1. 点击"技能"按钮
2. 输入技能索引
3. 选择"方向释放"
4. 选择方向（⬆️⬇️⬅️➡️）
5. 输入距离（格子数）
6. ✅ 自动发送命令

#### 取消操作
- 点击"取消"按钮
- 清除选中状态和高亮

#### 缩放地图
- 点击"缩放"按钮
- 在放大/缩小之间切换

---

### 方式二：命令输入

#### 基础命令

| 命令 | 格式 | 示例 | 说明 |
|------|------|------|------|
| **移动** | `move X Y` | `move 10 5` | 移动到坐标(10,5) |
| **攻击** | `attack 目标ID` | `attack E1` | 攻击敌人E1 |
| **技能** | `use 索引 目标` | `use 0 E1` | 用0号技能攻击E1 |
| | | `use 0 10 5` | 对坐标(10,5)释放 |
| | | `use 0 up 3` | 向上方3格释放 |
| **查看技能** | `skills` | `skills` | 显示可用技能 |
| **查看状态** | `info` | `info` | 显示角色信息 |
| **结束回合** | `pass` | `pass` | 跳过当前回合 |

#### 快捷按钮

| 按钮 | 功能 | 等效命令 |
|------|------|----------|
| **技能表** 🔵 | 查看技能列表 | `skills` |
| **pass** 🔴 | 结束回合 | `pass` |
| **取消** 🟠 | 取消选中 | - |
| **技能** 🟣 | 进入技能模式 | - |
| **缩放** 🔵 | 放大/缩小地图 | - |
| **退出** ⚫ | 退出游戏 | - |
| **帮助** 🔵 | 显示帮助信息 | - |

---

## 📲 通知功能

### 回合提醒
轮到你的回合时，会自动推送通知：
```
标题: 轮到你了！
内容: 现在是你的回合，快来操作吧！
```

### 设置通知权限

**Android**：
- 首次连接时自动请求
- 设置 → 应用 → LB_FATE → 通知

**iOS**：
- 首次连接时自动请求
- 设置 → 通知 → LB_FATE

**Windows**：
- 自动请求权限
- 设置 → 系统 → 通知

---

## 🎯 游戏技巧

### 基础策略
1. **查看技能**：每回合开始先点击"技能表"查看可用技能
2. **观察范围**：选中单位后查看移动/攻击范围
3. **合理走位**：利用地形和距离优势
4. **MP管理**：移动和攻击都消耗MP，注意资源分配

### 快速操作流程

**标准回合**：
```
1. 点击自己的单位（查看范围）
2. 点击目标位置移动
3. 点击敌人攻击
4. 点击"pass"结束回合
```

**技能流程**：
```
1. 点击"技能表"查看技能
2. 点击"技能"按钮
3. 输入技能索引
4. 选择目标方式
5. 执行技能
```

### 操作提示
- 💡 绿色圆环 = 已选中的单位
- 💡 蓝色高亮 = 可以移动到这里
- 💡 金色高亮 = 可以对这里释放技能
- 💡 HP条颜色 = 绿色(>60%) / 橙色(30-60%) / 红色(<30%)

---

## ❓ 常见问题

### 连接问题

**Q: 无法连接到服务器**
```
A: 检查清单：
  ✓ 服务器是否已启动
  ✓ IP地址是否正确
  ✓ 端口号是否一致（默认35500）
  ✓ 防火墙是否阻止连接
  ✓ 同一局域网下
```

**Q: 连接后立即断开**
```
A: 可能原因：
  • 服务器满员
  • 网络不稳定
  • 服务器重启
  → 稍后重试
```

### 操作问题

**Q: 点击地图没有反应**
```
A: 确认：
  • 是否轮到你的回合
  • 是否已选中自己的单位
  • 目标位置是否在范围内
```

**Q: 技能无法释放**
```
A: 检查：
  • MP是否足够
  • 目标是否在范围内
  • 技能索引是否正确
  • 用"skills"命令查看技能详情
```

**Q: 找不到"取消"按钮**
```
A: 位于快捷按钮行，橙色背景
   也可以点击空白区域取消
```

### 游戏问题

**Q: 看不到消息历史**
```
A: 向上滚动消息日志区域
   保留最近500条消息
```

**Q: 地图太小看不清**
```
A: 点击"缩放"按钮放大
   再次点击恢复
```

**Q: 不知道怎么操作**
```
A: 点击"帮助"按钮查看操作指南
   或参考本文档
```

---

## 🔧 高级功能

### 命令自动完成
- 点击单位/格子会自动填充命令到输入框
- 可以手动修改后发送

### 多种输入方式
- 手势操作（快速）
- 命令输入（精确）
- 快捷按钮（便捷）

### 状态同步
- 实时显示单位位置
- HP/MP 自动更新
- 回合提醒通知

---

## 📞 技术支持

### 日志查看
游戏日志显示在消息区域，包括：
- ✅ 操作确认
- ❌ 错误信息
- ℹ️ 系统提示
- 📊 游戏状态

### 报告问题
如遇到问题，请提供：
1. 操作系统版本
2. 错误截图
3. 操作步骤
4. 服务器日志

### 更新日志
- **v1.0** (2025-10-01)
  - ✨ 首次发布
  - ✅ 基础游戏功能
  - ✅ 手势操作系统
  - ✅ 回合通知
  - ✅ 完整命令支持

---

## 📚 相关文档

- [手势操作详解](GESTURE_CONTROLS.md)
- [推送通知说明](MOBILE_NOTIFICATIONS.md)
- [网格渲染技术](MAUI_GRID_RENDERING.md)
- [项目README](../LB_FATE.Mobile/README.md)

---

**祝游戏愉快！** 🎮🎉

如有问题或建议，欢迎反馈。
